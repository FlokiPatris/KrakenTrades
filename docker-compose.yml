version: '3.9'  # Docker Compose specification version (not Python or image version)

services:
  kraken:  # Service name â€” refers to your Python app container
    build: .  # Builds the image from the Dockerfile in current directory
    container_name: krakentrades  # Assigns a custom name to the running container
    working_dir: /app  # Sets the working directory inside the container
    volumes:
      - .:/app  # Mounts your local project folder into the container for live access
    environment:
      - PYTHONUNBUFFERED=1  # Ensures real-time output by disabling Python's stdout buffering
    tty: true  # Allocates a pseudo-TTY for interactive terminal usage (useful for logs/debugging)
    healthcheck:
      test: ["CMD", "python", "-c", "import requests; exit(0) if requests.get('https://api.kraken.com/0/public/Time').ok else exit(1)"]
      interval: 30s
      timeout: 5s
      retries: 3
      start_period: 10s
